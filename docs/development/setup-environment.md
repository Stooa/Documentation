# Setup and run development environment

## Requirements

To run this project, you need to have:

- [Git](https://git-scm.com/)
- [Nvm](https://github.com/nvm-sh/nvm)
- [Yarn](https://yarnpkg.com/)
- [Mkcert](https://github.com/FiloSottile/mkcert)
- [Docker](https://www.docker.com/)
- [Docker compose](https://docs.docker.com/compose/cli-command/)

## How to run this project?

The only command you should use to run this project is:

```
make up
```

This commands builds the `docker-compose.yaml` file. As you can see, it contains containers
related to Jitsi (JVB, Jicofo, Prosody), backend (nginx, fpm, consumer) and frontend (nginx, next).
There are other commands to control the Docker containers, you can find them on `Makefile`.

In case of mysql error table/view doesn't exist, run `make provision`.

## Access

There are several endpoints configured for Stooa:

* https://localhost:8343 (Access to the frontend)
* https://localhost:8443 (Access to the backend)
* https://localhost:8443/docs (Access to the docs)
* https://localhost:8443/admin (Access to the backoffice)
* http://localhost:8025 (Access to Mailhog)

## How to update the api-platform autogenerated types?

The api-platform autogenerated interfaces are located in `frontend/types/api-platform`.

In order to update them, you just need to:

1. Delete the interfaces you want to update
2. Execute in local environment

```
NODE_TLS_REJECT_UNAUTHORIZED=0 npx @api-platform/client-generator --generator typescript https://localhost:8443 frontend/types/api-platform
``` 

